<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Vue formulaire étendue pour POS Config -->
    <record id="pos_config_form_view_extension" model="ir.ui.view">
        <field name="name">pos.config.form.extension</field>
        <field name="model">pos.config</field>
        <field name="inherit_id" ref="point_of_sale.pos_config_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form/sheet/div[@class='row mt16 o_settings_container'][last()]" position="after">
                <div class="row mt16 o_settings_container">
                    <div class="col-12">
                        <h2>Configuration Cuisine/Bar</h2>
                    </div>
                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="pos_sound_enabled"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="pos_sound_enabled" string="Sons POS (Serveurs)"/>
                            <div class="text-muted">
                                Activer les notifications sonores pour les serveurs
                            </div>
                            <div class="content-group" invisible="not pos_sound_enabled">
                                <div class="mt16">
                                    <label for="pos_sound_file" class="o_light_label"/>
                                    <field name="pos_sound_file"/>
                                </div>
                                <div class="mt16" invisible="pos_sound_file != 'custom'">
                                    <label for="pos_custom_sound" class="o_light_label"/>
                                    <field name="pos_custom_sound" 
                                           required="pos_sound_file == 'custom'"
                                           placeholder="URL ou chemin vers votre fichier audio"/>
                                </div>
                                <div class="mt16">
                                    <label for="pos_volume" class="o_light_label">Volume (%)</label>
                                    <field name="pos_volume" widget="integer"/>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="auto_hide_completed"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="auto_hide_completed" string="Masquage Automatique"/>
                            <div class="text-muted">
                                Masquer automatiquement les commandes terminées
                            </div>
                            <div class="content-group" invisible="not auto_hide_completed">
                                <div class="mt16">
                                    <label for="hide_delay" class="o_light_label">Délai (secondes)</label>
                                    <field name="hide_delay" widget="integer"/>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 o_setting_box" invisible="not pos_sound_enabled">
                        <div class="o_setting_right_pane">
                            <div class="text-muted mb16">
                                Testez les différents sons disponibles
                            </div>
                            <div class="mb16">
                                <button name="test_pos_sound"
                                        string="Tester Son POS"
                                        type="object"
                                        class="btn btn-secondary me-2"/>
                                <button name="test_all_sounds"
                                        string="Tester Tous les Sons"
                                        type="object"
                                        class="btn btn-outline-secondary"/>
                            </div>
                            <div class="alert alert-info">
                                <strong>Sons disponibles :</strong><br/>
                                • <code>pos_ready.mp3</code> : Son standard pour commande prête<br/>
                                • <code>pos_ding.mp3</code> : Son court type "ding"<br/>
                                • <code>pos_notification.mp3</code> : Son de notification générique<br/>
                                • <strong>Custom</strong> : Votre propre fichier audio
                            </div>
                        </div>
                    </div>
                </div>
            </xpath>
        </field>
    </record>
</odoo>